<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>HTML Code Generator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      max-width: 900px;
    }

    h1 {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }

    .section {
      margin-bottom: 1.5rem;
    }

    label {
      font-weight: bold;
      display: block;
      margin-bottom: 0.25rem;
    }

    textarea {
      width: 100%;
      min-height: 120px;
      box-sizing: border-box;
      font-family: Consolas, monospace;
      font-size: 0.95rem;
      padding: 8px;
      border-radius: 4px;
      border: 1px solid #ccc;
      resize: vertical;
    }

    #output {
      min-height: 200px;
    }

    button {
      padding: 8px 14px;
      border-radius: 4px;
      border: none;
      cursor: pointer;
      margin-right: 8px;
      font-size: 0.95rem;
    }

    #generateBtn {
      background-color: #007bff;
      color: white;
    }

    #copyBtn {
      background-color: #28a745;
      color: white;
    }

    #status {
      display: inline-block;
      margin-left: 10px;
      font-size: 0.9rem;
      color: #333;
    }
  </style>
</head>
<body>
  <h1>HTML Code Generator</h1>

  <div class="section">
    <p>
      Enter the content for each section. Empty sections (head, body, script) will be omitted.
      The body text will preserve multiple spaces and line breaks.
    </p>
  </div>

  <div class="section">
    <label for="headInput">&lt;head&gt; content (optional)</label>
    <textarea id="headInput" placeholder="Example: &lt;title&gt;My Page&lt;/title&gt;"></textarea>
  </div>

  <div class="section">
    <label for="bodyInput">&lt;body&gt; content (text to convert)</label>
    <textarea id="bodyInput" placeholder="Type your body text here.&#10;Multiple     spaces and line breaks will be preserved."></textarea>
  </div>

  <div class="section">
    <label for="scriptInput">&lt;script&gt; content (optional)</label>
    <textarea id="scriptInput" placeholder="Example: console.log('Hello');"></textarea>
  </div>

  <div class="section">
    <button id="generateBtn" type="button">Generate HTML</button>
    <button id="copyBtn" type="button">Copy Code</button>
    <span id="status"></span>
  </div>

  <div class="section">
    <label for="output">Generated HTML (copy from here)</label>
    <textarea id="output" readonly></textarea>
  </div>

  <script>
    function convertBodyTextToHTML(text) {
      // Escape special HTML characters first
      let escaped = text
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;');

      // Normalize line endings
      escaped = escaped.replace(/\r\n/g, '\n');

      // Replace spaces with &nbsp; to preserve multiple spaces
      escaped = escaped.replace(/ /g, '&nbsp;');

      // Replace newlines with <br>
      escaped = escaped.replace(/\n/g, '<br>\n');

      return escaped;
    }

    document.getElementById('generateBtn').addEventListener('click', function () {
      const headInput = document.getElementById('headInput').value;
      const bodyInput = document.getElementById('bodyInput').value;
      const scriptInput = document.getElementById('scriptInput').value;

      const hasHead = headInput.trim() !== '';
      const hasBody = bodyInput.trim() !== '';
      const hasScript = scriptInput.trim() !== '';

      let parts = [];
      parts.push('<!DOCTYPE html>');
      parts.push('<html>');

      if (hasHead) {
        parts.push('<head>');
        parts.push(headInput);
        parts.push('</head>');
      }

      if (hasBody) {
        const convertedBody = convertBodyTextToHTML(bodyInput);
        parts.push('<body>');
        parts.push(convertedBody);
        parts.push('</body>');
      }

      if (hasScript) {
        parts.push('<script>');
        parts.push(scriptInput);
        parts.push('</script>');
      }

      parts.push('</html>');

      const finalHTML = parts.join('\n');
      document.getElementById('output').value = finalHTML;
      document.getElementById('status').textContent = 'HTML generated.';
    });

    document.getElementById('copyBtn').addEventListener('click', function () {
      const output = document.getElementById('output');
      output.select();
      output.setSelectionRange(0, 999999); // for mobile

      let copied = false;

      try {
        if (navigator.clipboard && navigator.clipboard.writeText) {
          navigator.clipboard.writeText(output.value).then(function () {
            document.getElementById('status').textContent = 'Code copied to clipboard.';
          }).catch(function () {
            document.execCommand('copy');
            document.getElementById('status').textContent = 'Code copied (fallback).';
          });
        } else {
          document.execCommand('copy');
          document.getElementById('status').textContent = 'Code copied (fallback).';
        }
        copied = true;
      } catch (e) {
        document.getElementById('status').textContent = 'Copy failed. Please copy manually.';
      }

      if (!copied) {
        document.getElementById('status').textContent = 'Copy failed. Please copy manually.';
      }
    });
  </script>
</body>
</html>
